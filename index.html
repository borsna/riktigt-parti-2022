<!DOCTYPE html>
<html lang="sv">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74795500-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-74795500-1');
        </script>

        <link rel="stylesheet" href="resources/css/style.css">
        <link rel="icon" type="image/png" href="resources/images/favicon.png" />
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <title>Riktigt eller påhittat parti 2022</title>
    </head>
    <body>
        <h1>Riktigt eller påhittat parti?</h1>
        <p>
            Är det en riktig eller påhittad partisymbol för ett registerat parti till riksdagsvalet 2022?
        </p>
        <div id="app">
            <div v-if="intro">
                <button class="start" v-on:click="start">Starta Quizet!</button>
            </div>

            <div v-if="quiz">
                <img :src="currentImage">
                <progress :value="progress" :max="parties.length"></progress>
                <div>
                    <span class="wrong"></span>
                </div>
                <div>
                    <button v-on:click="guessReal" class="real">Riktigt parti</button>
                    <button v-on:click="guessFake" class="fake">Påhittat parti</button>
                </div>
            </div>

            <div v-if="score">
                <p>
                    <strong>Du fick {{ points }} av {{ parties.length }} rätt</strong>
                </p>
                <button v-on:click="retry" class="retry">Försök igen</button>
            </div>
        </div>
        
        <script>
            /*
                https://www.val.se/for-partier/partibeteckning/registrerade-partibeteckningar.html
            */
            var app = new Vue({
                el: '#app',
                data: {
                  parties:[
                    {source: "ond-kyckling-partiet.png",real: true},
                    {source: "andringspartiet.png",real: true},
                    {source: "direktdemokraterna.png",real: true},
                    {source: "enhet.png",real: true},
                    {source: "envisavskaffarasyl.png",real: true},
                    {source: "foretaget-sverige.png",real: true},
                    {source: "framtidstro.png",real: true},
                    {source: "initiativet.png",real: true},
                    {source: "klassiskt-liberala-partiet.png",real: true},
                    {source: "knapptryckarna.png",real: true},
                    {source: "medborgarresan.png",real: true},
                    {source: "min-rost.png",real: true},
                    {source: "nya-frihetspartiet.png",real: true},
                    {source: "nya-samhallspartiet.png",real: true},
                    {source: "nyans.png",real: true},
                    {source: "positivt-aamh.png",real: true},
                    {source: "socialliberatianerna.png",real: true},
                    {source: "solidaritetspartiet.png",real: true},
                    {source: "svenska-rikslagen.png",real: true},
                    {source: "svenskarna.png",real: true},
                    {source: "valsamverkanspartiet.png",real: true},
                    {source: "vinningspartiet.png",real: true},
                    {source: "billigare-bensin.png",real: false},
                    {source: "rattvisa-till-alla.png",real: false},
                    {source: "nordlig-front.png",real: false}
                  ],
                  current: 0,
                  points: 0,
                  state: 'intro'
                },
                created: function () {
                    this.shuffleArray(this.parties);
                },
                computed: {
                    currentImage: function () {
                      var p = this.parties[this.current];
                      if(p.real){
                        return "resources/images/real/"+p.source;
                      }else{
                        return "resources/images/fake/"+p.source;
                      }
                    },
                    progress: function(){
                        return this.current;
                    },
                    intro: function(){
                        return this.state === 'intro';
                    },
                    quiz: function(){
                        return this.state === 'quiz';
                    },
                    score: function(){
                        return this.state === 'score';
                    }
                },
                methods: {
                    guessFake: function (event) {
                        if(!this.isReal()){
                            this.points++;
                        }
                        this.next();
                    },
                    guessReal: function (event) {
                        if(this.isReal()){
                            this.points++;
                        }
                        this.next();
                    },
                    next: function(){
                        if(this.current >= this.parties.length -1){
                            this.state = 'score';
                        }else{
                            this.current++;
                        }
                    },
                    start: function(event){
                        this.state = 'quiz';
                    },
                    retry: function(event){
                        this.points = 0;
                        this.shuffleArray(this.parties);
                        this.current = 0;
                        this.state = 'quiz';
                    },
                    isReal: function(){
                        if(this.parties[this.current].real){
                            return true;
                        }else{
                            return false;
                        }
                    },
                    shuffleArray: function(array) {
                        for (var i = array.length - 1; i > 0; i--) {
                            var j = Math.floor(Math.random() * (i + 1));
                            var temp = array[i];
                            array[i] = array[j];
                            array[j] = temp;
                        }
                    }
                }
            })
        </script>
    </body>
</html>